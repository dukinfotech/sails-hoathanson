<%- contentFor('HeaderCss') %>
<!--Chartist Chart CSS -->
<link rel="stylesheet" href="public/libs/chartist/chartist.min.css" />
<!--Echart  -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.8.0/echarts-en.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

<!--Datatables  -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.flash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>

<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.colVis.min.js"></script>

<!-- perticular page css -->

<%- contentFor('title') %>  
<title>Hoa Than Son</title>

<%- contentFor('breadcrumb') %>
<div class="col-xl-12">
  <div class="page-title-box">
    <h4 class="font-size-18"><%= title %> - <%= fa.FULLNAME %></h4> 
  </div>
</div>

<%- contentFor('body') %>



<!-- row 1 -->
<div class="row">
  <!-- close -->
  <div class="col-xl-3 col-md-6">
    <div class="card mini-stat bg-primary text-white">
      <div class="card-body">
        <div class="mb-4">
          <div class="float-left mini-stat-img mr-4">
            <img src="public/images/services-icon/01.png" alt="" />
          </div>
          <h5 class="font-size-16 text-uppercase mt-0 text-white-50">Close          </h5>
          <h4 class="font-weight-medium font-size-24">
            <%= all.C %> <i class="mdi mdi-arrow-<%= indicator[0].sig %> text-<%= indicator[0].color %> ml-2"></i>
          </h4>
          <p class="mb-0 float-right"></p>
          <div class="mini-stat-label bg-<%= indicator[0].color %>">
            <p class="mb-0"><%= indicator[0].value %></p>
          </div>
        </div>
        <div class="pt-2">
          <div class="float-right">
            <a href="#price-chart" class="text-white-50"
              ><i class="mdi mdi-arrow-right h5"></i
            ></a>
          </div>
          <p class="text-white-50 mb-0 mt-1">52W H: <%= (+all.H52W).toFixed(2) %> - L: <%= (+all.L52W).toFixed(2) %></p>
        </div>
      </div>
    </div>
  </div>
  <!-- spt -->
  <div class="col-xl-3 col-md-6">
    <div class="card mini-stat bg-primary text-white">
      <div class="card-body">
        <div class="mb-4">
          <div class="float-left mini-stat-img mr-4">
            <img src="public/images/services-icon/02.png" alt="" />
          </div>
          <h5 class="font-size-16 text-uppercase mt-0 text-white-50">
            <%= indicator[1].name %>
          </h5>
          <h4 class="font-weight-medium font-size-24">
            TSL: <%= indicator[1].text %>
            <!--i class="mdi mdi-arrow-<%= indicator[1].sig %> text-<%= indicator[1].color %> ml-2"></i-->
          </h4>
          <div class="mini-stat-label bg-<%= indicator[1].color %>">
            <p class="mb-0">@ <%= indicator[1].sig %></p>
          </div>
        </div>
        <div class="pt-2">
          <div class="float-right">
            <a href="#spt" class="text-white-50"
              ><i class="mdi mdi-arrow-right h5"></i
            ></a>
          </div>
          <p class="text-white-50 mb-0 mt-1">PL: <%= indicator[1].value %></p>
        </div>
      </div>
    </div>
  </div>
  <!-- vnidex -->
  <div class="col-xl-3 col-md-6">
    <div class="card mini-stat bg-primary text-white">
      <div class="card-body">
        <div class="mb-4">
          <div class="float-left mini-stat-img mr-4">
            <img src="public/images/services-icon/03.png" alt="" />
          </div>
          <h5 class="font-size-16 text-uppercase mt-0 text-white-50">
            <%= indicator[2].name %>
          </h5>
          <h4 class="font-weight-medium font-size-24">
            <%= indicator[2].text %> <i class="mdi mdi-arrow-<%= indicator[2].sig %> text-<%= indicator[2].color %> ml-2"></i>
          </h4>
          <div class="mini-stat-label bg-<%= indicator[2].color %>">
            <p class="mb-0"><%= indicator[2].value %> %</p>
          </div>
        </div>
        <div class="pt-2">
          <div class="float-right">
            <a href="#" class="text-white-50"
              ><i class="mdi mdi-arrow-right h5"></i
            ></a>
          </div>
          <p class="text-white-50 mb-0 mt-1">Since last month</p>
        </div>
      </div>
    </div>
  </div>
  <!-- hnxindex -->
  <div class="col-xl-3 col-md-6">
    <div class="card mini-stat bg-primary text-white">
      <div class="card-body">
        <div class="mb-4">
          <div class="float-left mini-stat-img mr-4">
            <img src="public/images/services-icon/04.png" alt="" />
          </div>
          <h5 class="font-size-16 text-uppercase mt-0 text-white-50">
            <%= indicator[3].name %>
          </h5>
          <h4 class="font-weight-medium font-size-24">
            <%= indicator[3].text %> <i class="mdi mdi-arrow-<%= indicator[3].sig %> text-<%= indicator[3].color %> ml-2"></i>
          </h4>
          <div class="mini-stat-label bg-<%= indicator[3].color %>">
            <p class="mb-0"><%= indicator[3].value %>%</p>
          </div>
        </div>
        <div class="pt-2">
          <div class="float-right">
            <a href="#" class="text-white-50"
              ><i class="mdi mdi-arrow-right h5"></i
            ></a>
          </div>
          <p class="text-white-50 mb-0 mt-1">Since last month</p>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end row -->

<!-- row 2 -->
<div class="row">
  <!-- MCDX chart -->
  <div class="col-lg-9">
    <div class="card">

      <div class="card-body" >
        <h4 class="card-title mb-4">MCDX</h4>
        <div id="gauge-chart" style="height:330px"></div>
      </div>
    </div>
  </div>
  <!-- FA table -->
  <div class="col-xl-3">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title mb-4">FA information</h4>
        <div class="table-responsive">
          <table id="fa-info" class="table table-hover table-centered table-nowrap mb-0">
            <tbody>
              <tr>
                <td>P/E:</td>
                <td><%= (all.C/fa.EPS).toFixed(2) %></td>
                <td><%= (farange.mpe).toFixed(2) %>/<%= (farange.ape).toFixed(2) %>/<%= (farange.Mpe).toFixed(2) %></td>
              </tr>
              <tr>
                <td>P/BV:</td>
                <td><%= (all.C/fa.BookValuePerShare).toFixed(2) %></td>
                <td><%= (farange.mpbv).toFixed(2) %>/<%= (farange.apbv).toFixed(2) %>/<%= (farange.Mpbv).toFixed(2) %></td>
              </tr>
              <tr>
                <td>P/S:</td>
                <td><%= (+all.C/fa.SalesPerShare).toFixed(2) %></td>
                <td><%= (farange.mpbv).toFixed(2) %>/<%= (farange.apbv).toFixed(2) %>/<%= (farange.Mpbv).toFixed(2) %></td>
              </tr>
              <tr>
                <td>ROE:</td>
                <td><%= (+fa.ReturnOnEquity).toFixed(2) %></td>
                <td><%= (farange.mpbv).toFixed(2) %>/<%= (farange.apbv).toFixed(2) %>/<%= (farange.Mpbv).toFixed(2) %></td>
              </tr>
              <tr>
                <td>ROA:</td>
                <td><%= (+fa.ReturnOnAssets).toFixed(2) %></td>
                <td><%= (farange.mpbv).toFixed(2) %>/<%= (farange.apbv).toFixed(2) %>/<%= (farange.Mpbv).toFixed(2) %></td>
              </tr>
              <tr>
                <td>EPS:</td>
                <td><%= (+fa.EPS).toFixed(2) %></td>
                <td><%= (farange.mpbv).toFixed(2) %>/<%= (farange.apbv).toFixed(2) %>/<%= (farange.Mpbv).toFixed(2) %></td>
              </tr>
              <tr>
                <td>Beta:</td>
                <td><%= (+fa.BETA).toFixed(2) %></td>
                <td><%= (farange.mpbv).toFixed(2) %>/<%= (farange.apbv).toFixed(2) %>/<%= (farange.Mpbv).toFixed(2) %></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end row -->

<!-- script for row 2 -->
<script type="text/javascript">
  let myChart = echarts.init(document.getElementById('gauge-chart'));
  let option = <%- JSON.stringify(data1 || null) %>;

  myChart.setOption(option, true);
</script>
<script>
$(document).ready(function() {
    $('#example').DataTable( {
    } );
} );
</script>

<!-- row 3 -->
<div class="row">
  <!-- SPT -->
  <div class="col-xl-3">
    <div class="card">
      <div class="card-body">
          <h4 class="card-title mb-4">SPT Report</h4>
        <div class="card">
          <div class="card-body" >
            <div class="">
                <img
                    class="img-thumbnail"
                    alt="200x200"
                    width="200"
                    src="public/images/maintenance.png"
                    data-holder-rendered="true"
                />
            </div>
            <div class="mt-4">

            </div>            
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- TA table -->
  <div class="col-xl-4">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title mb-4">TA information</h4>
        <div class="table-responsive">
          <table id="example" class="table table-hover table-centered table-nowrap mb-0">
            <tbody>
              <% for(let i=4; i<14; i++) {%>
                <tr>
                  <td><i class="mdi mdi-arrow-<%= indicator[i].sig %> text-<%= indicator[i].color %> ml-2"></i><%= indicator[i].name %></td>
                  <td><%= indicator[i].value %></td>
                  <td><p class="mb-0 text-<%= indicator[i].color %>"><%= indicator[i].text %></p></td>
                </tr>
              <% } %>            
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!-- TA charts-->
  <div class="col-xl-5">
    <div class="row">
      <!-- TA sum-->
      <div class="col-md-12">
        <div class="card ">
          <div class="card-body" >
            <div class="row">
              <div class="col-md-6">
                <div id="indicator-chart" style="height:220px"  ></div>
              </div>            
              <div class="col-md-6">
                <h4 class="card-title">BS score</h4>

                <div class="mt-4">
                  <table class="table mb-0">
                    <tbody>
                      <tr>
                        <td><span class="badge badge-danger">Dn</span></td>
                        <td>Down trend</td>
                        <td class="text-right"><%= data4 %></td>
                      </tr>
                      <tr>
                        <td><span class="badge badge-success">Up</span></td>
                        <td>Up trend</td>
                        <td class="text-right"><%= data3 %></td>
                      </tr>
                      <tr>
                        <td><span class="badge badge-warning">No</span></td>
                        <td>No trend</td>
                        <td class="text-right"><%= data5 %></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <!-- TA details-->
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <div>
              <h4 class="card-title mb-4"> </h4>
            </div>
            
            <div class="wid-peity mb-4">
              <div class="row">
                <div class="col-md-4">
                  <div>
                    <p class="text-muted">VIX</p>
                    <h5 class="mb-4"><%= data6[19] %></h5>
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="mb-4">
                    <span
                      class="peity-line"
                      data-width="100%"
                      data-peity='{ "fill": ["rgba(2, 164, 153,0.3)"],"stroke": ["rgba(2, 164, 153,0.8)"]}'
                      data-height="60"
                      ><%= data6 %></span
                    >
                  </div>
                </div>
              </div>
            </div>
            <div class="">
              <div class="row">
                <div class="col-md-4">
                  <div>
                    <p class="text-muted">RSI(14)</p>
                    <h5><%= data7[19] %></h5>
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="mb-4">
                    <span
                      class="peity-line"
                      data-width="100%"
                      data-peity='{ "fill": ["rgba(2, 164, 153,0.3)"],"stroke": ["rgba(2, 164, 153,0.8)"]}'
                      data-height="60"
                      ><%= data7 %></span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>  
    </div>
  </div>
</div>

<!-- end row -->    
<script>
  let myChart = echarts.init(document.getElementById('indicator-chart'));

  option = {
    tooltip: {
        trigger: 'item',
        formatter: '{b}: {c} ({d}%)'
    },
    grid: 
    {
      left: '8%',
      right: '8%',
      top: '3%',

        height: '94%'
    },
    series: [
        {
            type: 'pie',
            radius: ['50%', '70%'],
            color:['#ec4561','#02a499', '#f8b425', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074', '#546570', '#c4ccd3'],
            avoidLabelOverlap: false,
            label: {
                show: false,
                position: 'center'
            },
            emphasis: {
                label: {
                    show: false,
                    fontSize: '30',
                    fontWeight: 'bold'
                }
            },
            labelLine: {
                show: false
            },
            data: [
            {value: <%= data4 %>, name: 'Dn trend'},
            {value: <%= data3 %>, name: 'Up trend'},
            {value: <%= data5 %>, name: 'No trend'}

            ]
        }
    ]
};

myChart.setOption(option, true);

</script>







<div class="row">
  <div class="col-lg-12" id="price-chart">
    <div class="card">
      <div class="card-body">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs nav-tabs-custom" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#daily" role="tab">
              <span class="d-block d-sm-none"><i class="fas fa-home"></i></span>
              <span class="d-none d-sm-block">Daily</span> 
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#weekly" role="tab">
              <span class="d-block d-sm-none"><i class="far fa-user"></i></span>
              <span class="d-none d-sm-block">Weekly</span> 
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#intra15" role="tab">
              <span class="d-block d-sm-none"><i class="far fa-envelope"></i></span>
              <span class="d-none d-sm-block">15m</span>   
            </a>
          </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content" >
          <div class="tab-pane active p-3" id="daily" role="tabpanel"  >
            <div id="price-daily" style="height:480px; width: 100%;"></div>
          </div>
          <div class="tab-pane p-3" id="weekly" role="tabpanel" >
            <div id="price-weekly" style="height:480px; width: 100%;"></div>
          </div>
          <div class="tab-pane p-3" id="intra15" role="tabpanel" >
            <div id="price-intra15" style="height:480px; width: 100%;"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  let myChart1 = echarts.init(document.getElementById('price-daily'));
  let option = <%- JSON.stringify(data2 || null) %>;
  myChart1.setOption(option, true);

  let myChart2 = echarts.init(document.getElementById('price-weekly'));
  let option = <%- JSON.stringify(wdata2 || null) %>;
  myChart2.setOption(option,true);

  let myChart3 = echarts.init(document.getElementById('price-intra15'));
  let option = <%- JSON.stringify(idata2 || null) %>;
  myChart3.setOption(option, true);


  $(document).ready(function(){
  $('.nav-tabs a[href="#intra15"]').on('shown.bs.tab', function () {
    myChart3.resize();   });
  $('.nav-tabs a[href="#weekly"]').on('shown.bs.tab', function () {
    myChart2.resize();   });
  });
</script>
<!-- Collapse -->


<!-- end row -->


<%- contentFor('FooterJs') %>
<!-- Peity chart-->
<script src="public/libs/peity/jquery.peity.min.js"></script>

<!-- Plugin Js-->
<script src="public/libs/chartist/chartist.min.js"></script>
<script src="public/libs/chartist-plugin-tooltips/chartist-plugin-tooltip.min.js"></script>

<!--script src="public/js/pages/dashboard.init.js"></script-->
<script src="public/htson/summary.init.js"></script>

<%- contentFor('BottomJs') %>
<!-- nothing -->
