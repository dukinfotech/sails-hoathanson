<%- contentFor('HeaderCss') %>
<!--Chartist Chart CSS -->
<link rel="stylesheet" href="public/libs/chartist/chartist.min.css" />
<!--Echart  -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.8.0/echarts-en.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

<!--Datatables  -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.flash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>

<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.colVis.min.js"></script>

<!-- perticular page css -->

<%- contentFor('title') %>  
<title>Hoa Than Son</title>

<%- contentFor('breadcrumb') %>
<div class="col-sm-6">
    <div class="page-title-box">
        <h4 class="font-size-18">Market Information</h4>
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item active">Welcome to HTS Market Information</li>
        </ol>
    </div>
</div>

<%- contentFor('body') %>


<div class="row" id="tables">
    <div class="col-12 ">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs nav-tabs-custom" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#change" role="tab">
                <span class="d-block d-sm-none"><i class="fas fa-home"></i></span>
                <span class="d-none d-sm-block">% change</span> 
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#MCDX" role="tab">
                <span class="d-block d-sm-none"><i class="far fa-user"></i></span>
                <span class="d-none d-sm-block">% MCDX</span> 
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#P2VN30" role="tab">
                <span class="d-block d-sm-none"><i class="far fa-envelope"></i></span>
                <span class="d-none d-sm-block">P to VN30</span>   
              </a>
            </li>
        </ul>
  
        <!-- Tab panes -->
        <div class="tab-content" >
            <div class="tab-pane active p-3" id="change" role="tabpanel"  >
                <div id="refresh1">
    
                <table class="table table-bordered table-sm mb-0 text-center">
                        <tbody>
                            <% for(let i=0; i<11; i++) {%>
                                <tr>
                                <% for(let j=0; j<60; j++) {%>
                                <td style="background: rgb(<%= result[0][i*60+j].Red %>,<%= result[0][i*60+j].Green %>,<%= result[0][i*60+j].Blue %> )">
                                    <!--p><%= result[0][i*60+j].TICKER %></p-->
                                    <p> </p>
                                </td>
                                <% } %>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                    <table >
                        <style>
                         td {
                          border: 0px solid black;
                        }
                        </style>
                        
                        <tr><td ><%= new Date(result[0][0].HEATDATE).toLocaleDateString() %> <%= result[0][0].HEATTIME %></td></tr>
                    </table> 
                </div>

            </div>
            <div class="tab-pane p-3" id="MCDX" role="tabpanel" >
                <div id="refresh">
                <table class="table table-bordered table-sm mb-0 text-center" >
                    <tbody>
                        <% for(let i=0; i<15; i++) {%>
                            <tr>
                            <% for(let j=0; j<44; j++) {%>
                            <td style="background: rgb(<%= result[2][i*44+j].Red %>,<%= result[2][i*44+j].Green %>,<%= result[2][i*44+j].Blue %> )">
                                <!--p><%= result[2][i*44+j].TICKER %></p-->
                                <p> </p>
                            </td>
                            <% } %>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
                <table >
                    <style>
                     td {
                      border: 0px solid black;
                    }
                    </style>
                    
                    <tr><td ><%= new Date(result[2][0].HEATDATE).toLocaleDateString() %> <%= result[2][0].HEATTIME %></td></tr>
                </table>
                </div>
            </div>
            <div class="tab-pane p-3" id="P2VN30" role="tabpanel" >
                <div id="refresh2">

                <table class="table table-bordered table-sm mb-0 text-center">
                    <tbody>
                        <% for(let i=0; i<12; i++) {%>
                            <tr>
                            <% for(let j=0; j<55; j++) {%>
                            <td style="background: rgb(<%= result[1][i*55+j].Red %>,<%= result[1][i*55+j].Green %>,<%= result[1][i*55+j].Blue %> )">
                                <!--p><%= result[1][i*55+j].TICKER %></p-->
                                <p> </p>
                            </td>
                            <% } %>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
                <table >
                    <style>
                     td {
                      border: 0px solid black;
                    }
                    </style>
                    
                    <tr><td ><%= new Date(result[1][0].HEATDATE).toLocaleDateString() %> <%= result[1][0].HEATTIME %></td></tr>
                </table>
            </div>
        </div>
    </div>
    </div>
</div>
<script>
    function fetchdata(){
        $.ajax({  
            url:'/api/market',  
            method:'get',  
            dataSrc: 'result',
            success: function(){
                $('#refresh').load( " #refresh" );
                $('#refresh1').load( " #refresh1" );
                $('#refresh2').load( " #refresh2" );

   }
            }
 );
}

$(document).ready(function(){
 setInterval(fetchdata,60000);
});

</script>     

    
<!-- end row -->

<%- contentFor('FooterJs') %>
    <!-- Peity chart-->
    <script src="public/libs/peity/jquery.peity.min.js"></script>

    <!-- Plugin Js-->
    <script src="public/libs/chartist/chartist.min.js"></script>
    <script src="public/libs/chartist-plugin-tooltips/chartist-plugin-tooltip.min.js"></script>

    <!--script src="public/js/pages/dashboard.init.js"></script-->
    <script src="public/htson/market.init.js"></script>

 <%- contentFor('BottomJs') %>
 <!-- nothing -->




